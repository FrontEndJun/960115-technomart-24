var modal,userName,userEmail,slides=document.getElementsByName("promo-slider"),isLocalStorage=!0,currentSlide=0,buttonBuy=document.querySelectorAll(".action-buy"),writeUsLink=document.querySelector(".write-us-button"),mapLink=document.querySelector(".map"),nextSlideButton=document.querySelector(".next-slide"),previousSlideButton=document.querySelector(".prev-slide"),form=document.querySelector(".modal-write-us form");try{userName=localStorage.getItem("name"),userEmail=localStorage.getItem("mail")}catch(a){isLocalStorage=!1}writeUsLink&&writeUsLink.addEventListener("click",function(a){a.preventDefault(),modal=document.querySelector(".modal-write-us"),modal.classList.add("modal-show"),modal.querySelector("input[name=name]").focus(),isLocalStorage&&(userName&&(modal.querySelector("input[name=name]").value=userName,modal.querySelector("input[name=mail]").focus()),userEmail&&(modal.querySelector("input[name=mail]").value=userEmail,modal.querySelector("textarea[name=letter-text]").focus())),modal.querySelector(".close").addEventListener("click",function(a){a.preventDefault(),modal.classList.remove("modal-show"),modal.classList.remove("modal-shake")})}),mapLink&&mapLink.addEventListener("click",function(a){a.preventDefault(),modal=document.querySelector(".popup-map"),modal.classList.add("modal-show"),modal.querySelector(".close").addEventListener("click",function(a){a.preventDefault(),modal.classList.remove("modal-show")})});for(var btn,i=0;i<buttonBuy.length;i++)btn=buttonBuy[i],btn.addEventListener("click",function(a){a.preventDefault(),modal=document.querySelector(".modal-order"),modal.classList.add("modal-show"),modal.querySelector(".close").addEventListener("click",function(a){a.preventDefault(),modal.classList.remove("modal-show")}),modal.querySelector(".continue-shopping").addEventListener("click",function(a){a.preventDefault(),modal.classList.remove("modal-show")})});function check(){for(var a=0;a<slides.length;a++)slides[a].checked&&(currentSlide=a)}previousSlideButton.addEventListener("click",function(a){a.preventDefault(),check(),++currentSlide>=slides.length&&(currentSlide=0),slides[currentSlide].checked=!0}),nextSlideButton.addEventListener("click",function(a){a.preventDefault(),check(),0>--currentSlide&&(currentSlide=slides.length-1),slides[currentSlide].checked=!0}),window.addEventListener("keydown",function(a){modal=document.querySelector(".modal-show"),27===a.keyCode&&(modal.classList.remove("modal-show"),modal.classList.remove("modal-shake"))}),form&&form.addEventListener("submit",function(a){modal=document.querySelector(".modal-write-us");var b=this.querySelector("input[name=name]").value,c=this.querySelector("input[name=mail]").value,d=this.querySelector("textarea[name=\"letter-text\"]").value;b&&c&&d?(localStorage.setItem("name",b),localStorage.setItem("mail",c)):(a.preventDefault(),modal.classList.remove("modal-shake"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("modal-shake"))}),document.addEventListener("DOMContentLoaded",function(){modal=document.querySelector(".popup-map"),modal.style.transform="translateX(10000px)",modal.style.opacity="0",modal.classList.add("modal-show"),setTimeout(function(){modal.classList.remove("modal-show"),modal.style.transform="translateX(0px)",modal.style.opacity="1"},3e3)});
