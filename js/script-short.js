function check(){for(var e=0;e<slides.length;e++)slides[e].checked&&(currentSlide=e)}var slides=document.getElementsByName("promo-slider"),isLocalStorage=!0,currentSlide=0,buttonBuy=document.querySelectorAll(".action-buy"),writeUsLink=document.querySelector(".write-us-button"),mapLink=document.querySelector(".map"),modal,nextSlideButton=document.querySelector(".next-slide"),previousSlideButton=document.querySelector(".prev-slide"),form=document.querySelector(".modal-write-us form"),userName,userEmail;try{userName=localStorage.getItem("name"),userEmail=localStorage.getItem("mail")}catch(e){isLocalStorage=!1}writeUsLink&&writeUsLink.addEventListener("click",function(e){e.preventDefault(),modal=document.querySelector(".modal-write-us"),modal.classList.add("modal-show"),modal.querySelector("input[name=name]").focus(),isLocalStorage&&(userName&&(modal.querySelector("input[name=name]").value=userName,modal.querySelector("input[name=mail]").focus()),userEmail&&(modal.querySelector("input[name=mail]").value=userEmail,modal.querySelector("textarea[name=letter-text]").focus())),modal.querySelector(".close").addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-show")})}),mapLink&&mapLink.addEventListener("click",function(e){e.preventDefault(),modal=document.querySelector(".popup-map"),modal.classList.add("modal-show"),modal.querySelector(".close").addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-show")})});for(var i=0;i<buttonBuy.length;i++){var btn=buttonBuy[i];btn.addEventListener("click",function(e){e.preventDefault(),modal=document.querySelector(".modal-order"),modal.classList.add("modal-show"),modal.querySelector(".close").addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-show")}),modal.querySelector(".continue-shopping").addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-show")})})}previousSlideButton.addEventListener("click",function(e){e.preventDefault(),check(),++currentSlide>=slides.length&&(currentSlide=0),slides[currentSlide].checked=!0}),nextSlideButton.addEventListener("click",function(e){e.preventDefault(),check(),--currentSlide<0&&(currentSlide=slides.length-1),slides[currentSlide].checked=!0}),window.addEventListener("keydown",function(e){27===e.keyCode&&document.querySelector(".modal-show").classList.remove("modal-show")}),form&&form.addEventListener("submit",function(e){modal=document.querySelector(".modal-write-us");var t=this.querySelector("input[name=name]").value,o=this.querySelector("input[name=mail]").value,l=this.querySelector('textarea[name="letter-text"]').value;t&&o&&l?(localStorage.setItem("name",t),localStorage.setItem("mail",o)):(e.preventDefault(),modal.style.animation="shake 0.3s",setTimeout(function(){modal.style.animation="modal-open 0s"},500))}),document.addEventListener("DOMContentLoaded",function(e){modal=document.querySelector(".popup-map"),modal.style.transform="translateX(10000px)",modal.style.opacity="0",modal.classList.add("modal-show"),setTimeout(function(){modal.classList.remove("modal-show"),modal.style.transform="translateX(0px)",modal.style.opacity="1"},3e3)});
